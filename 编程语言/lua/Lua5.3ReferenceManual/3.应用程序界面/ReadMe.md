# 堆栈
每当 Lua 调用 C 时，被调用的函数都会获得一个新的堆栈，该堆栈独立于以前的堆栈和仍然处于活动状态的 C 函数堆栈。此堆栈最初包含 C 函数的任何参数，它是 C 函数将其结果推送以返回给调用方的位置
# 堆栈大小
使用该函数 lua_checkstack 来增加堆栈大小。  
每当 Lua 调用 C 时，它都会确保至少 LUA_MINSTACK 堆栈位置可用。LUA_MINSTACK 定义为 20，因此通常您不必担心堆栈空间，除非您的代码具有将元素推送到堆栈上的循环。  
大多数查询函数接受可用堆栈空间内的任何值作为索引，即索引，最大值为您通过 lua_checkstack 设置的最大堆栈大小。此类指数称为可接受指数。  
请注意，0 永远不是可接受的索引。
# 伪指数
除非另有说明，否则任何接受有效索引的函数也可以使用伪索引进行调用，伪索引表示一些 C 代码可以访问但不在堆栈中的 Lua 值。伪索引用于访问 C 函数的线程环境、函数环境、注册表和上值。  
线程环境（全局变量所在的位置）始终处于伪索引 LUA_GLOBALSINDEX 。运行C函数的环境始终处于伪索引 LUA_ENVIRONINDEX 。  
要访问和更改全局变量的值，可以对环境表使用常规表操作。